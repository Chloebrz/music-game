<!DOCTYPE html>
<html class ="ui-mobile">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
	<link rel="stylesheet" type="text/css" href="style/master.css">
	<!-- <link href="style/bootstrap/css/bootstrap.min.css" rel="stylesheet" /> -->
	<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
</head>
<body >
<div data-role="page"data-theme="a" class="type-home">

		<div data-role="panel" id="mypanelLeft" data-position="left" data-display="overlay" data-position-fixed="true">
			<a class="ui-btn" href="#" data-rel="close">close</a>
			<h3>PlayList<h3>
			<ul data-role="listview">
				<li><a href="#">
				<img src="images/master/pop.png">
				<h2>Pop music name</h2>
				<p>I love this music...</p></a></li>

				<li><a href="#">
				<img src="images/master/jazz.jpg">
				<h2>Jazz1 name</h2>
				<p>I love this music...</p></a></li>

				<li><a href="#">
				<img src="images/master/blues.jpg">
				<h2>who I am</h2>
				<p>Beatles</p></a></li>
			</ul>
		</div><!-- /panel -->

		<div data-role="panel" id="mypanelRight" data-position="right" data-display="overlay" data-position-fixed="true">
			<a class="ui-btn" href="#" data-rel="close">close</a>
			<h3>Players:<h3>
			<ul data-role="listview">
				<li><a>Alice<span class="ui-li-count">25</span></a></li>
				<li><a>Bob<span class="ui-li-count">13</span></a></li>
				<li><a>Charly<span class="ui-li-count">10</span></a></li>
				</li>
			</ul>
			<h3>Music voted:<h3>
			<ul data-role="listview">
				<li><a data-icon="plus">Pop</a></li>
				<li><a data-icon="plus">Jazz</a></li>
				<li><a data-icon="plus">Blues</a></li>
			</ul>
		</div><!-- /panel -->


	  <div data-role="header"  data-position="fixed">
	  	<a href="#mypanelLeft" data-icon="bars">PlayList</a>
		<h1>Music Puzzle</h1>
		<a href="#mypanelRight" data-icon="bars">UserList</a>
	  </div>

	<div data-role="main" class="ui-content" >
		<div class="bgimg">
			<div class="textZone">
				<h1>Dangerous<h1>
				<p>Here is a description...blablabla....</p>
			</div>
		</div>

	</div>
	<div data-role="footer" class="ui-bar" data-position="fixed">
	<button class="ui-btn ui-corner-all ui-btn-icon-left ui-icon-play">play</button>
	<button class="ui-btn ui-corner-all ui-btn-icon-left ui-icon-next">next</button>
	<button class="ui-btn ui-corner-all ui-btn-icon-left ui-icon-volume">volume</button>

	<button id="lampe" class="btn btn-danger">Allumer la lampe</button>
	</div>
</div>

<dialog id="dialog">
	<h3><span id="name">XX</span> a buzzé !</h3>
	<p>Est-ce la bonne réponse ?</p>
	<button id="yes" class="btn btn-primary" value="oui">Oui</button>
	<button id="no" class="btn btn-default" value="non">Non</button>
</dialog>

<script src="/socket.io/socket.io.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
<script>
	var socket = io();

	$("#lampe").click(function () {
		$.get("http://localhost:8000/test", function (data, status) {
			console.log(data, status);
		});
	});

	socket.on("connect", function () {

		socket.on("buzz", function (data) {

			$("#name").html(data);

			var dialog = document.getElementById("dialog");
			dialog.showModal();

			document.getElementById("no").onclick = function() {
				dialog.close();
			};
			document.getElementById("yes").onclick = function() {
				dialog.close();
			};
		});
	});
</script>

</body>
</html>
